{% extends "base.html" %}

{% load static %}
{% load i18n %}
{% load core_tags %}
{% load account %}
{% load crispy_forms_filters %}

{% block head_title %}
  {% trans "Password Reset" %}
{% endblock head_title %}
{% block content %}
  <div id="password-reset" class="container-fluid entrance-page">
    <div class="card">
      <div class="card-header">
        {% trans "Password Reset" %}
      </div>
      <div class="card-body">

        {% if user.is_authenticated %}
          {% include "account/snippets/already_logged_in.html" %}
        {% endif %}

        <p>
          {% trans "Forgotten your password? Enter your e-mail address below,<br />and we'll send you an e-mail allowing you to reset it." %}
        </p>

        <form method="post"
              action="{% url 'account_reset_password' %}"
              class="password_reset">
          {% csrf_token %}
          {{ form|crispy }}

          <div class="d-flex flex-row align-items-center justify-content-between">
            <input class="btn btn-primary mt-3"
                   type="submit"
                   value="{% trans 'Reset My Password' %}" />
            <a href="{% url 'account_login' %}" class="btn btn-link mt-3">
              {% trans "Back to Sign In" %}
            </a>
          </div>
        </form>

        <br />

        <p>
          {% with contact_email=support_email %}
            {% blocktrans %}
                Please <a href="mailto:{{ contact_email }}">contact us</a> if you have any
                trouble resetting your password.
            {% endblocktrans %}
          {% endwith %}
        </p>

      </div>
    </div>
  </div>
{% endblock content %}
