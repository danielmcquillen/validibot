{% extends "app_base.html" %}
{% load i18n %}

{% block title %}Plans - {{ org.name }}{% endblock %}

{% block left_sidebar %}
  {% comment %}
  Only show left nav for users with full access.
  Restricted users (trial expired, suspended, canceled) should focus
  on the subscription process without navigation distractions.
  {% endcomment %}
  {% if not app_ui.restricted_mode %}
    {% include "app/partial/components/app_left_nav.html" %}
  {% endif %}
{% endblock left_sidebar %}

{% block app_content %}
<div class="container-fluid" id="billing-plans">
  <div class="app-content-header-bar row">
    <div class="app-content-header col-12 col-lg-6 d-flex flex-row align-items-center mb-2 mb-lg-0 p-0">
      <h1 class="app-page-title">
        <i class="bi bi-arrow-up-circle me-2"></i>
        {% trans "Plans" %}
      </h1>
    </div>
    <div class="col-12 col-lg-6 d-flex justify-content-lg-end gap-2 p-0">
      {% if not app_ui.restricted_mode %}
      <a href="{% url 'billing:dashboard' %}" class="btn btn-outline-secondary">
        <i class="bi bi-arrow-left me-1"></i>
        {% trans "Back" %}
      </a>
      {% endif %}
    </div>
  </div>

  {% if is_trial %}
  <div class="alert alert-info mb-4">
    <i class="bi bi-clock me-2"></i>
    {% blocktrans count days=trial_days_remaining %}
      You have {{ days }} day remaining on your free trial.
    {% plural %}
      You have {{ days }} days remaining on your free trial.
    {% endblocktrans %}
    {% trans "Subscribe now to ensure uninterrupted access." %}
  </div>
  {% endif %}

  {% if app_ui.restricted_mode %}
  <div class="alert alert-warning mb-4">
    <i class="bi bi-exclamation-triangle me-2"></i>
    {% trans "Your trial has expired. Please subscribe to continue using Validibot." %}
  </div>
  {% endif %}

  {% comment %}
  Include the plan cards partial template.
  Uses Django 6.0+ partialdef for reusable template fragments.
  {% endcomment %}
  {% include "billing/partials/plan_cards.html#plan_cards_grid" %}

  <div class="text-center mt-5">
    <p class="text-muted">
      {% trans "Questions about pricing?" %}
      <a href="{% url 'marketing:contact' %}">{% trans "Contact us" %}</a>
    </p>
  </div>
</div>
{% endblock app_content %}
