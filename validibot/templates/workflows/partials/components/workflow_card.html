{% load i18n static core_tags %}

<div class="card app-card workflow-card
            {% if workflow.is_archived %}
                archived
            {% endif %}
            mb-3"
     id="workflow-card-{{ workflow.pk }}">
    <div class="card-header ">
        <div class="card-title text-truncate">
            <div>
                <i class="bi bi-box me-2"></i>{{ workflow.name }}
            </div>
            {% if workflow.is_locked %}
                <span class="badge text-bg-warning text-dark">
                    {% trans "Locked" %}
                </span>
            {% endif %}
        </div>

        <div class="card-header-status">
            {% if workflow.is_archived %}
                <span class="badge text-bg-warning ms-1">
                    {% trans "Archived" %}
                </span>
            {% elif workflow.is_active %}
                <span class="badge text-bg-success ms-1">
                    {% trans "Active" %}
                </span>
            {% else %}
                <span class="badge text-bg-secondary ms-1">
                    {% trans "Inactive" %}
                </span>
            {% endif %}
        </div>
    </div>
    <div class="card-body d-flex flex-column">

        <dl class="card-data-item">
            <dt>
                {% trans "Project" %}:
            </dt>
            <dd>
                {% if workflow.project %}
                    <span class="badge rounded-pill border border-1 workflow-project-badge"
                          style="background-color: {{ workflow.project.color }};
                                 color: {{ workflow.project.badge_text_color }};
                                 border-color: {{ workflow.project.badge_border_color }}"
                          title="{{ workflow.project.name }}">
                        {{ workflow.project.name }}
                    </span>
                {% endif %}
            </dd>
        </dl>

        <dl class="card-data-item">
            <dt>
                {% trans "Slug" %}:
            </dt>
            <dd class="value">
                {{ workflow.slug }}
            </dd>
        </dl>

        <dl class="card-data-item">
            <dt>
                {% trans "Version" %}:
            </dt>
            <dd>
                <span class="badge text-bg-light align-self-start">
                    {% if workflow.version %}
                        {{ workflow.version }}
                    {% else %}
                        {% trans "Unversioned" %}
                    {% endif %}
                </span>
            </dd>
        </dl>

        <dl class="card-data-item">
            <dt>
                {% trans "Updated" %}:
            </dt>
            <dd>
                {{ workflow.modified|date:"M j, Y" }}
            </dd>
        </dl>

    </div>
    <div class="card-footer d-flex flex-row justify-content-end align-items-center gap-2">
        {% include "workflows/partials/components/workflow_actions.html" with workflow=workflow show_archived=show_archived current_layout=current_layout target_id="workflow-item-wrapper-"|add:workflow.pk %}
    </div>
</div>
